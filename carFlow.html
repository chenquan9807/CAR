<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <title>城市道路大脑</title>
    <meta charset="utf-8">
    <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <!-- Google Fonts -->
    <!-- Css -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="revolution/css/settings.css" />
    <link rel="stylesheet" href="css/rev-slider.css" />
    <link rel="stylesheet" href="css/font-icons.css" />
    <link rel="stylesheet" href="css/sliders.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" href="css/spacings.css" />
    <link rel="stylesheet" href="css/animate.min.css" />
    <link rel="stylesheet" href="css/icon.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/info.css">

    <!-- Favicons -->
    <link rel="shortcut icon" href="img/Parking charge.png">
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=	ypQIGddmmB7t1gmLO7YKiHQOF0SUwKUl">
    </script>
</head>

<body data-spy="scroll" data-offset="60" data-target=".fs-nav" class="onepage padding-box">
    <div id="contain">
        <span class="top-space"></span>
        <span class="bottom-space"></span>
        <header class="nav-type-1" id="home">
            <nav class="navbar navbar-fixed-top">
                <div class="fs-nav" id="overlay">
                </div>
                <div class="navigation-overlay">
                    <div class="container-fluid semi-fluid relative clearfix">
                        <div class="logo-container nopadding">
                            <div class="logo-wrap local-scroll">
                                <a href="./index.html" class="logo" style="color:azure; font-size: 18px;">
                                    城市道路大脑
                                </a>
                                &nbsp;&nbsp;&nbsp;
                                <a href="./download.html" style="color:azure; font-size: 18px; cursor: pointer;">
                                    <i class="iconfont" style="color:azure; font-size: 18px;">&#xe611;</i>
                                    下载客户端
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- end container -->
                </div>
            </nav>
        </header>

        <div class="main-wrapper oh">

            <!-- Revolution Slider -->
            <section>
				<div class="rev_slider_wrapper">
					<div class="rev_slider" id="slider1" data-version="5.0">
						<ul>
							<!-- SLIDE 2 -->
							<li data-transition="parallaxhorizontal" data-slotamount="1" data-masterspeed="2000"
								data-delay="10000" data-title="Awesome Features">

								<!-- MAIN IMAGE -->
								<!-- <img src="video/video_placeholder.jpg" alt="" data-bgrepeat="no-repeat"
									data-bgfit="cover" data-bgparallax="7" class="rev-slidebg"> -->
								<!-- MAIN IMAGE -->
								<img src="img/revolution/slide_3.jpg" alt="" data-bgrepeat="no-repeat"
								data-bgfit="cover" data-bgparallax="7" class="rev-slidebg">

								<!-- BACKGROUND VIDEO LAYER -->
								<!-- <div class="rs-background-video-layer" data-forcerewind="on" data-volume="mute"
									data-videowidth="100%" data-videoheight="100%" data-videomp4="video/video.mp4"
									data-videowebm="video/video.webm" data-videoogv="video/video.ogv"
									data-videostartat="00:00" data-videoendat="00:16" data-videocontrols="controls"
									data-videopreload="preload" data-videoloop="loopandnoslidestop" data-forceCover="1"
									data-aspectratio="16:9" data-autoplay="true" data-autoplayonlyfirsttime="false"
									data-nextslideatend="true"></div> -->

								<!-- OVERLAY LAYER -->
								<div class="tp-caption tp-shape tp-shapewrapper rs-parallaxlevel-0"
									data-x="['center','center','center','center']" data-hoffset="['0','0','0','0']"
									data-y="['middle','middle','middle','middle']" data-voffset="['0','0','0','0']"
									data-width="full" data-height="full" data-whitespace="nowrap"
									data-transform_idle="o:1;" data-transform_in="opacity:0;s:1500;e:Power3.easeInOut;"
									data-transform_out="s:1000;e:Power3.easeInOut;" data-start="750"
									data-basealign="slide" data-responsive_offset="on" data-responsive="off"
									style="z-index: 3;background-color:rgba(24, 28, 33, 0.45);">
								</div>

								<!-- LAYER NR. 1 -->
								<div class="tp-caption hero-text alt-font size-70" data-x="center" data-y="center"
									data-voffset="['-60', '-60', '-60', '-50']"
									data-fontsize="['120', '100', '70', '50']"
									data-whitespace="[nowrap, nowrap, nowrap, nowrap]"
									data-lineheight="['120', '100', '70', '50']" data-transform_idle="o:1;s:500"
									data-transform_in="y:100;scaleX:1;scaleY:1;opacity:0;"
									data-transform_out="x:left(R);s:1000;e:Power3.easeIn;s:1000;e:Power3.easeIn;"
									data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" data-start="1000"
									data-elementdelay="0.01" style="z-index: 4; text-align: center;">
									<strong>城市道路大脑</strong>
								</div>

								<!-- LAYER NR. 2 -->
								<div class="tp-caption medium-text" data-x="center" data-y="center"
									data-voffset="[25,25,25,18]" data-fontsize="['24', '24', '24', '18']"
									data-lineheight="['36', '32', '28', '26']"
									data-whitespace="[nowrap, nowrap, nowrap, normal]"
									data-width="[none, none, none, 300]" data-transform_idle="o:1;s:500"
									data-transform_in="y:100;scaleX:1;scaleY:1;opacity:0;"
									data-transform_out="x:left(R);s:1000;e:Power3.easeIn;s:1000;e:Power3.easeIn;"
									data-start="1200" data-elementdelay="0.01" style="z-index: 4; text-align: center; font-weight: bold">
									让您无忧停车
								</div>
								<div class="tp-caption tp-resizeme" data-x="center" data-y="center"
									data-voffset="[140, 140, 140, 140]" data-hoffset="0" data-transform_idle="o:1;s:500"
									data-transform_in="y:100;scaleX:1;scaleY:1;opacity:0;"
									data-transform_out="sX:0.9;sY:0.9;opacity:0;s:500;e:Power3.easeIn;s:500;e:Power3.easeIn;"
									data-start="1400" data-elementdelay="0.01" data-linktoslide="next"
									style="letter-spacing: 2px; z-index: 99;">
									<div class="icon-effect-8">
										<a href="./video/advertise.mp4"
											class="lightbox-video mfp-iframe play-btn hi-icon"></a></div>
								</div>
							</li>

							<!-- SLIDE 3 -->
							<li data-transition="parallaxhorizontal" data-slotamount="1" data-masterspeed="2000"
								data-delay="9000" data-title="Great Ideas">

								<!-- MAIN IMAGE -->
								<img src="img/revolution/slide_2.jpg" alt="" data-bgrepeat="no-repeat"
									data-bgfit="cover" data-bgparallax="7" class="rev-slidebg">

								<!-- LAYER NR. 1 -->
								<div class="tp-caption hero-text uppercase" data-x="center" data-y="center"
									data-voffset="['-60', '-60', '-60', '-50']"
									data-fontsize="['106', '70', '60', '40']"
									data-lineheight="['106', '70', '60', '40']" data-hoffset="0"
									data-transform_idle="o:1;s:500"
									data-transform_in="sX:0.8;sY:0.8;opacity:0;s:500;e:Power4.easeOut;"
									data-transform_out="sX:0.9;sY:0.9;opacity:0;s:500;e:Power3.easeIn;s:500;e:Power3.easeIn;"
									data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" data-start="1000" data-end="3000"
									data-splitin="chars" data-splitout="chars" data-elementdelay="0.05"
									data-endelementdelay="0.03" style="text-align: center; font-weight: bold"><strong>SmartPark</strong>
								</div>

								<!-- LAYER NR. 2 -->
								<div class="tp-caption hero-text uppercase" data-x="center" data-y="center"
									data-voffset="['-60', '-60', '-60', '-50']"
									data-fontsize="['106', '70', '60', '40']"
									data-lineheight="['106', '70', '60', '40']" data-hoffset="0"
									data-transform_idle="o:1;s:500"
									data-transform_in="sX:0.8;sY:0.8;opacity:0;s:500;e:Power4.easeOut;"
									data-transform_out="sX:0.9;sY:0.9;opacity:0;s:500;e:Power3.easeIn;s:500;e:Power3.easeIn;"
									data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" data-start="3500" data-end="5500"
									data-splitin="chars" data-splitout="chars" data-elementdelay="0.05"
									data-endelementdelay="0.03" style="text-align: center; font-weight: bold"><strong>倾心服务</strong>
								</div>

								<!-- LAYER NR. 3 -->
								<div class="tp-caption hero-text uppercase" data-x="center" data-y="center"
									data-voffset="['-60', '-60', '-60', '-50']"
									data-fontsize="['106', '70', '60', '40']"
									data-lineheight="['106', '70', '60', '40']" data-hoffset="0"
									data-transform_idle="o:1;s:500"
									data-transform_in="sX:0.8;sY:0.8;opacity:0;s:500;e:Power4.easeOut;"
									data-transform_out="sX:0.9;sY:0.9;opacity:0;s:500;e:Power3.easeIn;s:500;e:Power3.easeIn;"
									data-mask_in="x:0px;y:0px;s:inherit;e:inherit;" data-start="6000"
									data-splitin="chars" data-splitout="chars" data-elementdelay="0.05"
									data-endelementdelay="0.03" style="text-align: center; font-weight: bold"><strong>最好的选择</strong>
								</div>

								<!-- LAYER NR. 4 -->
								<div class="tp-caption medium-text" data-x="center" data-y="center" data-hoffset="0"
									data-voffset="[25,25,25,18]" data-fontsize="['24', '24', '22', '20']"
									data-lineheight="['36', '32', '28', '26']"
									data-whitespace="[nowrap, nowrap, nowrap, normal]"
									data-width="[none, none, none, 300]" data-transform_idle="o:1;s:500"
									data-transform_in="y:100;scaleX:1;scaleY:1;opacity:0;"
									data-transform_out="sX:0.9;sY:0.9;opacity:0;s:500;e:Power3.easeIn;s:500;e:Power3.easeIn;"
									data-start="1200" data-elementdelay="0.01" style="text-align: center; font-weight: bold">贴心的停车管家
								</div>

								<!-- LAYER NR. 5 -->
								<div class="tp-caption tp-resizeme" data-x="center" data-y="center"
									data-voffset="[140, 140, 140, 140]" data-hoffset="0" data-transform_idle="o:1;s:500"
									data-transform_in="y:100;scaleX:1;scaleY:1;opacity:0;"
									data-transform_out="sX:0.9;sY:0.9;opacity:0;s:500;e:Power3.easeIn;s:500;e:Power3.easeIn;"
									data-start="1400" data-elementdelay="0.01" data-linktoslide="next"
									style="letter-spacing: 2px;">
									<div class="icon-effect-8">
										<a href="./video/smartpark.mp4"
											class="lightbox-video mfp-iframe play-btn hi-icon"></a></div>
								</div>
							</li>
						</ul>
						<div class="local-scroll">
							<a href="#intro" class="scroll-down">
								<span></span>
							</a>
						</div>
					</div>
				</div>
			</section>

            <!-- Intro -->
            <section class="section-wrap intro" id="intro">
                <div class="container">
                    <h3 class="text-center">道路网流量</h3>
                    <div id="rodes">
                        <div class="rode" id="rode1" v-on:click="hidemark1"><span>起始点一</span><button></button></div>
                        <div class="rode" id="rode2" v-on:click="hidemark2"><span>起始点二</span><button></button></div>
                        <div class="rode" id="rode3" v-on:click="hidemark3"><span>起始点三</span><button></button></div>
                        <div class="rode" id="rode4" v-on:click="hidemark4"><span>综合</span><button></button></div>
                    </div>
                    <div id="carflow"></div>
                </div> <!-- end container -->
            </section> <!-- end intro -->

            <div class="footer-spacer">&nbsp;</div>
            <!-- Footer -->
            <footer class="footer bg-dark">
                <div class="container">
                    <div class="footer-widgets">
                        <div class="row">
                            <div class="col-md-6 col-md-offset-3">
                                <div class="footer-logo local-scroll text-center mb-20">
                                    <div class="logo-wrap local-scroll">
                                        <a href="#home" class="logo" style="color:azure">
                                            智慧停车
                                        </a>
                                    </div>
                                </div>
                                <div class="footer-socials mt-mdm-10">
                                    <div class="social-icons text-center">
                                        <a href="#">Wechat</a> -
                                        <a href="#">QQ</a> -
                                        <a href="#">Mail</a> -
                                        <a href="#">Phone</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- end container -->

                <div class="bottom-footer">
                    <div class="container">
                        <div class="row">

                            <div class="col-sm-12 copyright text-center">
                                <span>
                                    © 2019 Power By MAT
                                </span>
                            </div>
                        </div>
                    </div>
                </div> <!-- end bottom footer -->
            </footer> <!-- end footer -->
            <div id="back-to-top">
                <a href="#top"><i class="fa fa-angle-up"></i></a>
            </div>
        </div> <!-- end main-wrapper -->
    </div>
    <!-- jQuery Scripts -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/vue.js"></script>
    <script type="text/javascript" src="js/echarts.min.js"></script>
    <script type="text/javascript" src="js/mock.js"></script>
    <script type="text/javascript">
        new Vue({
            el: '#contain',
            data: {
                idPoint: 1,
                point1: [],
                point2: [],
                marker11: {},
                marker12: {},
                marker21: {},
                marker22: {},
                marker31: {},
                marker32: {},
                myIcon1: {},
                myIcon2: {}
            },
            mounted() {
                let vm = this
                var map = new BMap.Map('carflow')
                window.map = map
                map.enableScrollWheelZoom() // 启用滚轮放大缩小，默认禁用
                map.enableContinuousZoom() // 启用地图惯性拖拽，默认禁用
                var point = new BMap.Point(113.032543, 28.074933)
                map.centerAndZoom(point, 16)
                // window.setTimeout(function () {
                //     map.panTo(new BMap.Point(113.023748, 28.069641))
                // }, 2000)
                map.setMapStyle({
                    styleJson: styleJson
                })
                vm.myIcon1 = new BMap.Icon("./img/others/qidian_icon.png", new BMap.Size(48, 48));
                vm.myIcon2 = new BMap.Icon("./img/others/zhongdian_icon.png", new BMap.Size(48, 48));
                var point11 = new BMap.Point(113.0216564, 28.077451)
                vm.marker11 = new BMap.Marker(point11, {
                    icon: vm.myIcon1
                })
                window.map.addOverlay(vm.marker11)
                var point12 = new BMap.Point(113.030279, 28.080319)
                vm.marker12 = new BMap.Marker(point12, {
                    icon: vm.myIcon2
                })
                window.map.addOverlay(vm.marker12)
                var point21 = new BMap.Point(113.024207, 28.071076)
                vm.marker21 = new BMap.Marker(point21, {
                    icon: vm.myIcon1
                })
                window.map.addOverlay(vm.marker21)
                var point22 = new BMap.Point(113.041382, 28.08153)
                vm.marker22 = new BMap.Marker(point22, {
                    icon: vm.myIcon2
                })
                window.map.addOverlay(vm.marker22)
                var point31 = new BMap.Point(113.01985, 28.080989)
                vm.marker31 = new BMap.Marker(point31, {
                    icon: vm.myIcon1
                })
                window.map.addOverlay(vm.marker31)
                var point32 = new BMap.Point(113.03822, 28.076559)
                vm.marker32 = new BMap.Marker(point32, {
                    icon: vm.myIcon2
                })
                window.map.addOverlay(vm.marker32)
                vm.hidemark4()
                vm.getPoint()
                vm.MapView()
            },
            methods: {
                hidemark1() {
                    let vm = this

                    $.ajax({
                        url: './mock/data.json',
                        type: 'get',
                        success: function (response) {
                            $('#rode1 button').css('background', '#30ceff');
                            $('#rode2 button').css('background', '#8e9aa7');
                            $('#rode3 button').css('background', '#8e9aa7');
                            $('#rode4 button').css('background', '#8e9aa7');
                            window.map.addOverlay(vm.marker11)
                            window.map.addOverlay(vm.marker12)
                            window.map.removeOverlay(vm.marker21);
                            window.map.removeOverlay(vm.marker22);
                            window.map.removeOverlay(vm.marker31);
                            window.map.removeOverlay(vm.marker32);
                            vm.MapView();
                            vm.point1 = point11
                            vm.point2 = point12
                            for (let i = 0; i < vm.point1.length; i++) {
                                const point11 = new BMap.Point(vm.point1[i].lng, vm.point1[i].lat)
                                const point22 = new BMap.Point(vm.point2[i].lng, vm.point2[i].lat)
                                const speed = (vm.point1[i].speed + vm.point2[i].speed) / 2
                                const polyline = new BMap.Polyline([point11, point22], {
                                    strokeColor: vm.getColor(speed)
                                })
                                window.map.addOverlay(polyline)
                            }
                        },
                        error: function (error) {
                            console.log(error)
                        }
                    })
                },
                hidemark2() {
                    let vm = this
                    $.ajax({
                        url: './mock/data.json',
                        type: 'get',
                        success: function (response) {
                            $('#rode1 button').css('background', '#8e9aa7');
                            $('#rode2 button').css('background', '#30ceff');
                            $('#rode3 button').css('background', '#8e9aa7');
                            $('#rode4 button').css('background', '#8e9aa7');
                            window.map.removeOverlay(vm.marker11)
                            window.map.removeOverlay(vm.marker12)
                            window.map.addOverlay(vm.marker21);
                            window.map.addOverlay(vm.marker22);
                            window.map.removeOverlay(vm.marker31);
                            window.map.removeOverlay(vm.marker32);
                            vm.MapView();
                            vm.point1 = point21
                            vm.point2 = point22
                            for (let i = 0; i < vm.point1.length; i++) {
                                const point11 = new BMap.Point(vm.point1[i].lng, vm.point1[i].lat)
                                const point22 = new BMap.Point(vm.point2[i].lng, vm.point2[i].lat)
                                const speed = (vm.point1[i].speed + vm.point2[i].speed) / 2
                                const polyline = new BMap.Polyline([point11, point22], {
                                    strokeColor: vm.getColor(speed)
                                })
                                window.map.addOverlay(polyline)
                            }
                        },
                        error: function (error) {
                            console.log(error)
                        }
                    })

                },
                hidemark3() {
                    let vm = this
                    $.ajax({
                        url: './mock/data.json',
                        type: 'get',
                        success: function (response) {
                            $('#rode2 button').css('background', '#8e9aa7');
                            $('#rode3 button').css('background', '#30ceff');
                            $('#rode1 button').css('background', '#8e9aa7');
                            $('#rode4 button').css('background', '#8e9aa7');
                            window.map.removeOverlay(vm.marker11)
                            window.map.removeOverlay(vm.marker12)
                            window.map.removeOverlay(vm.marker21);
                            window.map.removeOverlay(vm.marker22);
                            window.map.addOverlay(vm.marker31);
                            window.map.addOverlay(vm.marker32);
                            vm.MapView();
                            vm.point1 = point31
                            vm.point2 = point32
                            for (let i = 0; i < vm.point1.length; i++) {
                                const point11 = new BMap.Point(vm.point1[i].lng, vm.point1[i].lat)
                                const point22 = new BMap.Point(vm.point2[i].lng, vm.point2[i].lat)
                                const speed = (vm.point1[i].speed + vm.point2[i].speed) / 2
                                const polyline = new BMap.Polyline([point11, point22], {
                                    strokeColor: vm.getColor(speed)
                                })
                                window.map.addOverlay(polyline)
                            }
                        },
                        error: function (error) {
                            console.log(error)
                        }
                    })

                },
                hidemark4() {
                    let vm = this
                    $.ajax({
                        url: './mock/data.json',
                        type: 'get',
                        success: function (response) {
                            $('#rode1 button').css('background', '#8e9aa7');
                            $('#rode2 button').css('background', '#8e9aa7');
                            $('#rode3 button').css('background', '#8e9aa7');
                            $('#rode4 button').css('background', '#30ceff');
                            window.map.addOverlay(vm.marker11)
                            window.map.addOverlay(vm.marker12)
                            window.map.addOverlay(vm.marker21);
                            window.map.addOverlay(vm.marker22);
                            window.map.addOverlay(vm.marker31);
                            window.map.addOverlay(vm.marker32);
                            vm.MapView();
                            vm.point1 = point41
                            vm.point2 = point42
                            for (let i = 0; i < vm.point1.length; i++) {
                                const point11 = new BMap.Point(vm.point1[i].lng, vm.point1[i].lat)
                                const point22 = new BMap.Point(vm.point2[i].lng, vm.point2[i].lat)
                                const speed = (vm.point1[i].speed + vm.point2[i].speed) / 2
                                const polyline = new BMap.Polyline([point11, point22], {
                                    strokeColor: vm.getColor(speed)
                                })
                                window.map.addOverlay(polyline)
                            }
                        },
                        error: function (error) {
                            console.log(error)
                        }
                    })

                },
                getColor(speed) {
                    if (speed > 0 && speed <= 30) {
                        return 'red'
                    } else if (speed > 30 && speed <= 45) {
                        return '#ffb611'
                    } else if (speed > 45 && speed <= 60) {
                        return 'rgb(162, 226, 60)';
                    } else if (speed > 60 && speed <= 80) {
                        return '#4be91d'
                    } else if (speed > 80) {
                        return '#14ffdc'
                    } else {
                        return '#1548ff'
                    }
                },
                getPoint() {
                    let vm = this
                    window.map.addEventListener('click', function (e) {
                        console.log("'id': " + Math.ceil(vm.idPoint / 2) + ", '" +
                            "lng': " + e.point.lng + ", 'lat': " + e.point.lat + ", 'speed': " +
                            Math.ceil(Math.random() * 10))
                        vm.idPoint = vm.idPoint + 1
                    })
                },
                MapView() {
                    var pointspark = []
                    for (let item in this.point2) {
                        var dic = {}
                        for (let key in this.point1[item]) {
                            dic[key] = this.point1[item][key]
                        }
                        // console.log(dic)
                        pointspark.push(dic)
                    }
                    // eslint-disable-next-line
                    var view = window.map.getViewport(eval(pointspark))
                    var mapZoom = 16
                    var centerPoint = view.center
                    var centerPoint = new BMap.Point(113.032543, 28.074933)
                    window.map.centerAndZoom(centerPoint, mapZoom)
                }
            }
        })
    </script>
    <script type="text/javascript" src="js/plugins.js"></script>
    <script type="text/javascript" src="revolution/js/jquery.themepunch.tools.min.js"></script>
    <script type="text/javascript" src="revolution/js/jquery.themepunch.revolution.min.js"></script>
    <script type="text/javascript" src="js/rev-slider.js"></script>
    <script type="text/javascript" src="js/scripts.js"></script>

    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.video.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.carousel.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.actions.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.kenburn.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.navigation.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.migration.min.js"></script>
    <script type="text/javascript" src="revolution/js/extensions/revolution.extension.parallax.min.js"></script>
</body>

</html>